<!doctype html>
<html lang="">
	<head>
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <link rel="stylesheet" href="tyyli.css">
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<title>Projektitehtävä</title>		
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	<body>  
        <div id="border_text">
        <form>
        <div id="lomake">
        </div>
            </form><br>
            <div class="container-contact100-form-btn">
                <button class="contact100-form-btn" onclick="laheta()"><span>Lähetä</span><i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i></button></div>
            <!-- jqueryn pääkirjasto -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
        </script>
  
        <script> 
        var lomakekentta = []; //tähän kerätään id-tunnukset
        $.getJSON("http://www.mocky.io/v2/5be3e8312f00006700d9f202", function( data ) {
        var items = [];  // alustetaan taulukko nimellä item 
        
        var kysymykset = data.kysymykset;
            
        items.push("<h1>"+data.otsikko+"</h1>")
            
        $.each(kysymykset, function( key, d ) {
        // lisätään push:lla taulukkoon li-elementti, jossa on json-tieto
        items.push(d.kysymys + "<br><input class='wrap-input100' 'input100' type='text' id="+d.kysymys_id+"><br>");  
        //kerätään id-tunnukset taulukkoon
        lomakekentta.push(d.kysymys_id);
        
        })
            
        //tulostetaan taulukon tiedot sivulle 
          $( "<div/>", {           // tehdään uusi div-elementti
          html: items.join( "" )  // yhdistetaan taulukon solut join:lla
          }).appendTo( "#lomake" );  // lisätään div-elementti taulukkotietoineen                           //bodyyn
        });
            
            function laheta  (){
            var vastaus;
            var tunnus;
            for (i=0;i<lomakekentta.length; i++){
            vastaus = document.getElementById(lomakekentta[i]).value;
            alert("{'id':"+lomakekentta[i]+",'vastaus':'"+vastaus+"'}");
            }    
         }  
            
            // stringify-metodia tarvitaan vain alert-funktiota varten. 
var myJSON = JSON.stringify(lahetys);

$.ajax({
 url: 'https://www.mocky.io/v2/omakoodi',
 type: 'POST',
 dataType: 'json',
 data: jsonData, 
 success: function() { alert('POST completed. Data:' + myJSON)}
});
            
            </script>
        </div>
    </body>
</html>